dataSources:
  vmId:
    type: "gce-metadata"
    value: "instance/id"
  vmZone:
    type: "gce-metadata"
    value: "instance/zone"
  vmProjectId:
    type: "gce-metadata"
    value: "project/project-id"
  ips:
    type: "list"
    value:
      - "111.144.187.212"
      - "233.142.26.173"
      - "65.44.51.196"
      - "229.15.109.233"
      - "210.34.246.74"
      - "136.250.243.161"
      - "83.8.35.71"
      - "2.116.82.111"
      - "106.237.14.54"
      - "13.30.17.185"
      - "77.68.25.151"
      - "106.81.246.38"
      - "141.4.119.20"
      - "244.102.94.157"
      - "77.121.52.139"
      - "13.30.17.14"
      - "13.30.17.94"
      - "13.30.17.108"
      - "13.30.17.122"
      - "13.30.17.255"
      - "13.30.17.246"
      - "13.30.17.165"
      - "13.30.17.17"
  cnxlogs:
    type: "list"
    value:
      - ["CRITICAL", "Too many denied attempts"]
      - ["INFO", "Access succeeded"]
      - ["WARNING", "Access failed"]

loggingJobs:
  - live: true
    logName: "eshop-server"
    endOffset: "30m"
    resourceType: "gce_instance"
    resourceLabels:
      instance_id: "{vmId}"
      project_id: "{vmProjectId}"
      zone: "{vmZone}"
    jsonPayload:
      message: "{cnxlogs[1]} {ips}"
      source: "{ips}"
    level: "{cnxlogs[0]}"
    variables:
      - "ips"
      - "cnxlogs"
      - "vmProjectId"
      - "vmId"
      - name: "vmZone"
        extractor: "/zones/([a-z0-9\\-]+)$"
    logEntries:
      - frequency: "2m~5m"
      - startOffset: "5m"
        endOffset: "25m"
        frequency: "3s~9s"
        variables:
          - name: "ips"
            selector: "1"
